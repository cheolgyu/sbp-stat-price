# 52주 최저고가 구하기
현재부터 n기간 동안의 종,시저,고가격 기준으로 최저, 최고가 찾기

## 테이블
project.tb_52_weeks
code_id, price_type, unit_type, unit,  highprice, lowprice 

### 예상 테이블 줄수
종목 * (52주, 1주, 2주, 3주, 1개월,2개월,3개월,4개월,5개월,6개월,7개월,8개월,9개월,10개월,11개월)찾는기간 수 * (저,고,종,시)기준가격    
2000*(12+3)*(4) = 120,000

### 프로세스
1. 테이블 초기화 하기.
   1. 전체 종목코드 조회
   2. 날짜 조회
      1. 마지막날짜 조회 : 마지막 장열림 기준부터 1년전 날짜 조회 
      2. 최신 장열림날짜 : 최신 날짜 기준 - n 주 전 일자 ==> 반복문에서 이 기준으로 조회해온 목록을 끊어서 찾음.
   3. 목록 조회 : 마지막날짜 보다 큰 해당종목의 가격+주단위 데이터 조회  
   4. 반복문으로 신고저가 찾은 후 비동기로 저장채널 보내기
      1. 종가기준 기간동안 최저,최고가
      2. 시가기준 기간동안 최저,최고가
      3. 저가기준 기간동안 최저,최고가
      4. 고가기준 기간동안 최저,최고가
         1. 하나의 목록에서 4번의 반복문을 돌려 가격별 최저,최고가 찾기
         2. 기준기간 만큼 목록에서 조회 온 다음. 
            1. 기준기간 시작일 부터 1주전 2주전 3주전 1달전,2,3,4,5,6,7,8,10,11,12달 전 일자를 구하기
            2. 1주 동안 최저,최고가 찾아서 저장하기
            3. 2주 동안 최저,최고가 찾아서 저장하기
            4. 3주 동안 최저,최고가 찾아서 저장하기
            5. .....
            6. 12달 동안 최저,최고가 찾아서 저장하기
   5. 저창 채널은 받은 후 저장(upsert 하지말고 insert로만 하기)
2. public.info 에 테이블 완료 됬다고 완료시간 업데이트 하기.


현재 가격이 52주와 얼마나 가까이에 있는 지를 파악한다.
그럼 테이블에는 얼마나 가까이에 있는지를 파악할수 있는 값이 존재 해야되지 않을까?
그리고 hiph_price와 low_price를 저장하지만 high_price_dt와 low_price_dt는 저장하지 않는다. 이것도 수정하자.

```
p1. sql로 실행

p1.1~4 golang
    dao select
    for
    chan
    chan
    dao insert
```
### config
meta.config에 추가할것 
기간 1~12개월 텍스트값, 1~3주 텍스트값   
config에서 기간 조회 dao 추가해야됨. .env로 하기    




